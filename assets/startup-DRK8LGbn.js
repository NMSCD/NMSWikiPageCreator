import{t as e}from"./minimal-rgKTtdRA.js";import{At as t,Ct as n,D as r,Et as i,F as a,J as o,L as s,M as c,Mt as l,Nt as u,O as d,Ot as f,Pt as p,Q as m,St as h,Tt as g,U as _,Y as ee,_t as te,b as v,bt as y,c as b,f as x,g as S,gt as ne,i as re,k as C,kt as w,n as ie,nt as T,o as E,r as D,rt as O,t as ae,tt as oe,u as se,vt as k,wt as A,xt as ce,y as j}from"./portalglyphs-BiLNd0o4.js";h(),n(),A(g),k([{element:"nameInput",func:function(){j()}},{element:"researchTeam",func:function(){o(),S()}},{element:"fileUpload",handler:"change",func:function(){a(this)}},{element:"portalglyphsInput",func:function(){re(this),D(),j()}},{element:"discoveredInput",func:function(){c("discoveredInput","discoveredlinkInput"),S()}},{element:"discoveredlinkInput",func:function(){c("discoveredlinkInput","discoveredInput"),S()}},{element:"docbyInput",func:function(){S()}},{element:"axesInput",handler:"change",func:function(){O()}},{element:"glyphDeleteButton",handler:"click",func:function(){ie()}},{element:"fileUploadTooltip",handler:"click",func:function(){u.uploadShown=!0}},{element:"galleryFileUploadTooltip",handler:"click",func:function(){u.galleryUploadShown=!0}}]),ne();var le={output:{explanationHeading:"explanationHeading",explanationContent:"explanationContent",explanationLink:"explanationLink",explanationWebpImg:"explanationWebpImg",explanationFallbackImg:"explanationFallbackImg"}},M=f.output.explanation;M&&(M.innerHTML=te),A(le);for(let e of["builderInput","builderlinkInput","discoveredInput","discoveredlinkInput"]){let t=f.input[e];t&&(t.dataset.player="")}function N(){let n=document.querySelectorAll(".table .data input, .table .data textarea"),a=document.querySelectorAll(".table .data select"),o=document.getElementsByTagName("output");for(let e of Array.from(n))switch(e.type.toLowerCase()){case"checkbox":e.checked=!1;break;case"radio":let t=document.querySelectorAll('input[type="radio"]:not([checked])'),n=document.querySelectorAll('input[type="radio"][checked]');for(let e of Array.from(t))e.checked=!1;for(let e of Array.from(n))e.checked=!0;break;default:e.value=""}for(let e of Array.from(a))e.value=e.options?.[0]?.value;for(let e of Array.from(o))e.innerText="";for(let e in ee(),l)delete l[e];let i=document.querySelectorAll(".error");for(let e of Array.from(i))v(e.previousElementSibling);for(let e in t)delete t[e];"function"==typeof w.resetExternal&&w.resetExternal(),e(),m()}function P(e,t){e.style.pointerEvents="none";let{innerText:n,dataset:{link:a}}=e;i.text=ce(JSON.stringify(l)),i.copy=!0,i.link=a;let o=x(e);if(o)return e.classList.remove("is-primary"),e.classList.add("is-danger"),e.innerText=o,void setTimeout(()=>{e.classList.remove("is-danger"),e.classList.add("is-primary"),e.innerText=n,e.style.pointerEvents=""},1500);let r=(f?.output?.[t])?.innerText?.replaceAll("\n\n\n","\n\n")??t;navigator.clipboard.writeText(r),i.copy=!0,i.link=a,e.innerText="Copied!",setTimeout(()=>{e.innerText=n,e.style.pointerEvents=""},1500)}function F(e){let t=f.output.fullArticle.innerText.replaceAll("\n\n\n","\n\n"),n=l.name,a=e;a.href="data:text/plain,"+encodeURIComponent(t),a.download=n+".txt"}function I(e,t=l.name){e.style.pointerEvents="none",L(e,p+"Special:EditPage/"+t)}function L(e,t){let n=x(e),a=RegExp(`[${["#","<",">","[","]","{","|","}"].join("")}]`,"g");if(n){let t=e.innerText;e.removeAttribute("href"),e.className="button is-danger",e.innerText=n,setTimeout(()=>{e.className="button is-outlined is-primary",e.innerText=t,e.style.pointerEvents=""},1500)}else e.href=t.replace(a," "),e.target="_blank",e.rel="noopener noreferrer",e.style.pointerEvents=""}function R(){if("function"!=typeof w.redirectPage)return;let e=document.getElementById("reset"),t=["copyRedirect","createRedirect"],n=document.createElement("p");if(n.id="redirectNote",n.classList.add("has-text-centered"),n.innerText="Please create a redirect for your page!",!w.redirectPage())return t.forEach(()=>{let n=e.previousElementSibling;t.includes(n.id)&&n.remove()}),void document.getElementById(n.id)?.remove();let a=document.createElement("button");a.innerText="Copy Redirect Code",a.type="button";let o=document.createElement("a");o.rel="noopener noreferrer",o.target="_blank",o.innerText="Create Redirect",k([{element:a,handler:"click",func:function(){P(this,`#REDIRECT [[${l.name}]]`)}},{element:o,handler:"click",func:function(){I(this,w.redirectPage())}}]);let i=[a,o];for(let n=0;n<i.length;n++){let a=i[n],l=t[n];if(document.getElementById(l))return;a.classList.add("button","is-outlined","is-primary"),a.id=l,a.dataset.link="redirect",e.insertAdjacentElement("beforebegin",a)}e.parentElement.insertAdjacentElement("beforebegin",n)}oe();var z=s('\n<button class="button is-outlined is-primary" id="copy" type="button" data-link="page" data-evt-id="copyButton">Copy Wikicode</button>\n<a class="button is-outlined is-primary" id="download" data-evt-id="downloadButton">Download File</a>\n<a class="button is-outlined is-primary" href="https://nomanssky.fandom.com/wiki/Special:Upload?multiple=true" id="uploadLink" rel="noopener noreferrer" target="_blank">Upload Pictures</a>\n<a class="button is-outlined is-primary" id="create" data-link="page" data-evt-id="createPageButton">Create Page</a>\n<button class="button is-warning" id="reset" type="reset" data-evt-id="resetButton">Reset Inputs</button>',{},[{element:"copyButton",handler:"click",func:function(){P(this,"fullArticle")}},{element:"downloadButton",handler:"click",func:function(){F(this)}},{element:"createPageButton",handler:"click",func:function(){I(this)}},{element:"resetButton",handler:"click",func:()=>N()}]),B='<p class="has-text-centered">You must copy the code first, then paste it into the wiki page.<br>Also don\'t forget to upload any images you have put here.</p>',V=f.output.actions;V.innerHTML="",E(z,V,"afterbegin"),V.insertAdjacentHTML("beforebegin",B),f.output.actions,s('\n<label style="display:flex; gap: .3rem"><input class="checkbox" type="checkbox" id="skipCheck" data-evt-id="skipCheck">Enable debug (no checks, no popups)</label>;\n<button style="margin: 0 1rem" class="button is-danger is-small" id="clearCache" data-evt-id="clearCache">Clear Localstorage</button>',{},[{element:"clearCache",handler:"click",func:()=>localStorage.clear()},{element:"skipCheck",handler:"change",func:function(){let e=this.checked;u.debug=e,u.uploadShown=e,u.galleryUploadShown=e,document.documentElement.dataset.debug=e.toString(),j()}}]),Object.defineProperty(u,"debug",{configurable:!1,writable:!1,value:!1});var H=document.getElementById("skipCheck");H&&new URLSearchParams(window.location.search).has("debug")&&(H.checked=!0,T(H,"change"));var U='<h2 class="title is-5 has-text-left has-text-weight-bold mb-2">\n  \x3c!--<output id="hubname" name="hubname"></output>  //NOSONAR\n\t(this is fine since this snippet is inserted somewhere else)--\x3e\n  <output\n    id="albumHeaderName"\n    name="name"\n  ></output>\n  entry for\n  <output\n    id="system"\n    name="system"\n  ></output\n  >:\n</h2>\n<div\n  id="albumText"\n  class="wikiText"\n>\n  This category is for content related to the \'\'\'<output\n    id="system"\n    name="system"\n  ></output\n  >\'\'\' [[system]].\n  <br />\n  <br />\n  [[Category: Systems]]\n  <br />\n  [[Category:\n  <output\n    id="region"\n    name="region"\n  ></output\n  >]]\n</div>\n';const W=s('<button id="albumBtn" class="button is-outlined is-primary"\n\t   data-link="album" data-evt-id="copyButton">\n\t   Copy Category Wikicode\n\t   </button>\n\t   <a class="button is-outlined is-primary" id="albumLink"\n\t   data-link="album" data-evt-id="openAlbumButton">\n\t   Open Category\n\t   </a>',{},[{element:"copyButton",handler:"click",func:function(){P(this,"albumText")}},{element:"openAlbumButton",handler:"click",func:function(){G(this)}}]);function G(e){e.style.pointerEvents="none";let t="function"==typeof w.albumLinkGen?w.albumLinkGen():l.catalogue?l.catalogue:(console.warn("No wiki page provided. Define the function `albumLinkGen()` and add it to the `globalFunctions` object or define a catalogue in the `pageData.catalogue` property!"),void(e.style.pointerEvents=""));t&&L(e,p+t)}function K(){let e="function"==typeof w.albumItemTypeExternal?w.albumItemTypeExternal():l.type;f.output.album.innerText=e}function q(){let e="function"==typeof w.albumDescExternal?w.albumDescExternal():"",t=f.output.albumDesc;t&&(t.innerText=e)}function J(){let e=(()=>{if("function"==typeof w.albumDiscovererExternal)return w.albumDiscovererExternal();{let{discovered:e,discoveredlink:t}=l;return t?`wiki=${t}`:`discoverer=${e}`}})(),t=f.output.albumDiscoverer;t&&(t.innerText=e)}function Y(){let e="function"==typeof w.albumNameExternal?w.albumNameExternal():l.name;f.output.albumName.innerText=e}function X(){let e="function"==typeof w.albumOtherExternal?w.albumOtherExternal():"",t=f.output.albumOther;t&&(t.innerText=e)}function ue(){let e="function"==typeof w.albumTypeExternal?w.albumTypeExternal():"";f.output.albumType.innerText=e}function de(){let e={albumHeaderName:"name",albumImage:"image",albumGlyphs:"portalglyphs"};for(let t in e){f.output[t].innerText=l[e[t]]}}function fe(){function e(){de(),J(),Y(),X(),ue(),K(),q()}l.albumInitialised?e():document.addEventListener("albumLoaded",()=>e())}var pe={output:{album:"album",albumType:"albumType",albumHeaderName:"albumHeaderName",albumImage:"albumImage",albumName:"albumName",albumOther:"albumOther",albumGlyphs:"albumGlyphs",albumDiscoverer:"albumDiscoverer",albumText:"albumText",albumDesc:"albumDesc"}},Z=f.output.albumEntry,Q=f.output.albumActions;Z instanceof HTMLDivElement&&(Z.innerHTML=U),Q instanceof HTMLDivElement&&(E(W,Q,"afterbegin"),A(pe),document.dispatchEvent(new Event("albumLoaded")),b("albumInitialised",!0),Q.insertAdjacentHTML("afterbegin",'<p style="width:100%" class="has-text-centered mb-3">Please don\'t forget to create a category entry!</p>')),ae(f.output.portalglyphButtons,"portalglyphsInput"),b("pageType",r()),se(),e(),d(),u.uploadShown=!0,u.galleryUploadShown=!0,m(),u.debug||(u.uploadShown=!1,u.galleryUploadShown=!1),j();var $=f.output.output;$.onmousedown=()=>_();for(let e of Array.from($.children)){let t=e;t.onmouseup=e=>C(e.target),t.ontouchend=e=>C(e.target)}y();try{T(f.input.portalglyphsInput,"input")}catch{}b("eventListeners",!0);export{K as a,X as c,fe as i,P as l,q as n,G as o,J as r,Y as s,W as t,R as u};
